(this["webpackJsonpwikidata-live-changes"]=this["webpackJsonpwikidata-live-changes"]||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/legend.0f000e53.svg"},356:function(e,t,a){},374:function(e,t,a){},508:function(e,t){},510:function(e,t){},517:function(e,t){},519:function(e,t){},555:function(e,t){},560:function(e,t,a){},561:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(83),i=a.n(r),c=(a(356),a(52)),o=a(29),u=a(7),l=a(10),h=a(12),p=a(13),d=a(2),f=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:" text-left",children:[Object(d.jsx)("h1",{className:"text-left  display-3",children:Object(d.jsx)("b",{children:this.props.title})}),Object(d.jsx)("h4",{children:this.props.subtitle})]})}}]),a}(s.a.Component),b=a(17),j=Object(n.createContext)();function v(e){var t=Object(n.useState)("light"),a=Object(b.a)(t,2),s=a[0],r=a[1];return Object(d.jsx)("div",{children:Object(d.jsx)(j.Provider,{value:{colorScheme:s,toggleColorScheme:function(){r("dark"===s?"light":"dark"),"dark"===s?document.body.classList.remove("dark"):document.body.classList.add("dark")}},children:e.children})})}a(67);var m=a(608),g=a(609),x=a(317),O=a.n(x),y=(a(363),function(){var e=Object(n.useContext)(j),t=e.colorScheme,a=e.toggleColorScheme,s={position:"relative",top:"5px"};return Object(d.jsx)("div",{children:Object(d.jsx)(O.a,{className:"dark-mode-toggle",checked:"dark"===t,onChange:function(e){return a()},icons:{checked:Object(d.jsx)("span",{style:s,children:"\ud83c\udf19"}),unchecked:Object(d.jsx)("span",{style:s,children:"\ud83d\udd06"})},"aria-label":"Dark mode toggle"})})});var k=function(e){var t=Object(n.useState)(e.history),a=Object(b.a)(t,2),s=(a[0],a[1],window.location.href),r=Object(n.useContext)(j),i=r.colorScheme,o=(r.setColorScheme,s.endsWith("/")?"nav-link--active":"nav-link"),u=s.endsWith("/page")?"nav-link--active":"nav-link",l=s.endsWith("/feed")?"nav-link--active":"nav-link",h=s.endsWith("/user-search")?"nav-link--active":"nav-link",p=s.endsWith("/page-revisions")?"nav-link--active":"nav-link",f=s.endsWith("/about-page")?"nav-link--active":"nav-link",v=s.endsWith("/ksknc")?"nav-link--active":"nav-link";return"dark"===i&&(o+=" dark",u+=" dark",l+=" dark",h+=" dark",p+=" dark",f+=" dark",v+=" dark"),Object(d.jsx)("div",{children:Object(d.jsx)(m.a,{children:Object(d.jsx)(m.a.Collapse,{children:Object(d.jsxs)(g.a,{children:[Object(d.jsx)(g.a.Link,{as:c.b,to:"/",className:o,children:"Home"}),Object(d.jsx)(g.a.Link,{as:c.b,to:"/page",className:u,children:"Dashboard"}),Object(d.jsx)(g.a.Link,{as:c.b,to:"/feed",className:l,children:"Feed"}),Object(d.jsx)(g.a.Link,{as:c.b,to:"/user-search",className:h,children:"User Search"}),Object(d.jsx)(g.a.Link,{as:c.b,to:"/page-revisions",className:p,children:"Page Revisions"}),Object(d.jsx)(g.a.Link,{as:c.b,to:"/about-page",className:f,children:"About Us"}),Object(d.jsx)("a",{as:c.b,target:"_blank",rel:"noopener noreferrer",href:"https://github.com/JeremieSD/Software-Engineering",className:v,children:"Github Project"}),Object(d.jsx)(y,{})]})})})})},w=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"ting",children:[Object(d.jsx)("h2",{className:this.props.styled,children:this.props.btnTitle1}),Object(d.jsx)("h2",{className:this.props.styled,children:this.props.btnTitle2}),Object(d.jsx)("br",{}),Object(d.jsx)(c.b,{to:this.props.btnLink,children:Object(d.jsx)("button",{type:"button",className:this.props.btnStyle,children:this.props.btnText})})]})}}]),a}(n.Component),C=a(41),S=a.n(C),N=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={text:"something",errorCode:"Loading..."},e.updateStats=function(){S.a.ajax({url:"https://protected-shelf-93081.herokuapp.com/https://www.wikidata.org/wiki/Special:Statistics",type:"GET",success:function(e){S()("#div1").html(S()(S()(e).find(".mw-statistics-articles")).find(".mw-statistics-numbers")),S()("#div2").html(S()(S()(e).find(".mw-statistics-edits")).find(".mw-statistics-numbers")),S()("#div3").html(S()(S()(e).find(".mw-statistics-users")).find(".mw-statistics-numbers")),S()("#div4").html(S()(S()(e).find(".mw-statistics-users-active")).find(".mw-statistics-numbers"))}})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.updateStats(),this.intervalID=setInterval((function(){return e.updateStats()}),5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"row col-lg-12 mx-auto col-12 justify-content-center  homeStatContainer text-left",children:[Object(d.jsxs)("div",{className:"col-lg-3 col-12 homeStat",children:[Object(d.jsx)("h1",{id:"div1",children:this.state.errorCode}),Object(d.jsx)("h1",{children:"Items"})]}),Object(d.jsxs)("div",{className:"col-lg-3 col-12 homeStat",children:[Object(d.jsx)("h1",{id:"div2",children:this.state.errorCode}),Object(d.jsx)("h1",{children:"Edits"})]}),Object(d.jsxs)("div",{className:"col-lg-3 col-12 homeStat",children:[Object(d.jsx)("h1",{id:"div3",children:this.state.errorCode}),Object(d.jsx)("h1",{children:"Users"})]}),Object(d.jsxs)("div",{className:"col-lg-3 col-12  homeStat",children:[Object(d.jsx)("h1",{id:"div4",children:this.state.errorCode}),Object(d.jsx)("h1",{children:"Active Users"})]})]})}}]),a}(n.Component),L=a(73),D=a(70),T=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={history:n.props.history},n}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this),Object(d.jsxs)("div",{className:"HomePage",children:[Object(d.jsx)(k,{history:this.state.history}),Object(d.jsxs)("div",{className:"HomePageContent row margin-right: -15px margin-left: -15px",children:[Object(d.jsx)("div",{className:"col-lg-5 col-sm-12",children:Object(d.jsx)(f,{title:"Wikidata Live",subtitle:"A web app to visualise recent changes to Wikidata in quasi real time."})}),Object(d.jsx)("div",{className:"col-lg-7 col-sm-12 homeNav",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-lg-4 col-sm-12",children:[Object(d.jsx)("h1",{className:"text-red",children:Object(d.jsx)(L.a,{icon:D.a})}),Object(d.jsx)(w,{styled:"font-weight-bold text-red",btnStyle:"align-bottom btn btn-outline-red",btnTitle1:"About",btnTitle2:"Us",btnText:"About",btnLink:"/about-page"})]}),Object(d.jsxs)("div",{className:"col-lg-4 col-sm-12 homeNav",children:[Object(d.jsx)("h1",{className:"text-green",children:Object(d.jsx)(L.a,{icon:D.b})}),Object(d.jsx)(w,{styled:"font-weight-bold text-green",btnStyle:"align-bottom btn btn-outline-green",btnTitle1:"Wikidata",btnTitle2:"Dashboard",btnText:"Dashboard",btnLink:"/page"})]}),Object(d.jsxs)("div",{className:"col-lg-4 col-sm-12 homeNav",children:[Object(d.jsx)("h1",{className:"text-blue",children:Object(d.jsx)(L.a,{icon:D.d})}),Object(d.jsx)(w,{styled:"font-weight-bold text-blue",btnStyle:"align-bottom btn btn-outline-blue",btnTitle1:"User",btnTitle2:"Data",btnText:"Users",btnLink:"/most-active-users"})]})]})})]}),Object(d.jsx)("div",{className:"statsContent row justify-content-center",children:Object(d.jsx)(N,{})})]})}}]),a}(n.Component),G=a(39),P=Object(G.a)(),M=a(201),I=a(4),F=a.n(I),R=a(8),E="https://www.wikidata.org/w/api.php",A={mode:!1},B=function(){var e=Object(R.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){return t.editcount-e.editcount},a=J(E,{action:"query",format:"json",list:"allusers",auprop:"editcount|groups",aulimit:"max",auwitheditsonly:"1",auactiveusers:"1"},5).then((function(e){return e.query.allusers})).then((function(e){return e.sort(t)})),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(R.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J(E,{action:"query",format:"json",list:"recentchanges",rcprop:"title|ids|sizes|timestamp",rclimit:"500"},5).then((function(e){return e.query.recentchanges})),e.next=4,t;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(R.a)(F.a.mark((function e(){var t,a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J(E,{action:"query",format:"json",list:"recentchanges",rcprop:"ids",rclimit:"50"},5).then((function(e){return e.query.recentchanges})),e.next=4,t;case 4:return a=(a=e.sent).map((function(e){return e.revid})),e.next=8,X(a);case 8:return n=e.sent,s=[{id:"damaging",label:"damaging",value:0,color:"#F25543"},{id:"unsure",label:"unsure",value:0,color:"#FFF047"},{id:"good faith",label:"good faith",value:0,color:"#92E16F"}],e.next=12,n;case 12:return n=e.sent,Object.values(n).forEach((function(e){void 0!==e.damaging.score&&!0===e.damaging.score.prediction?s[0].value+=1:void 0!==e.damaging.score&&!1===e.damaging.score.prediction?s[2].value+=1:s[1].value+=1})),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(R.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return(t=e.sent).forEach((function(e){e.value=Math.abs(e.newlen-e.oldlen),e.id=e.revid.toString(),e.label=e.title})),t.sort((function(e,t){return t.value-e.value})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Y(t),n=Object(b.a)(a,2),s=n[0],r=n[1],i=s.then((function(e){return K(e)})),e.next=4,i;case 4:return e.t0=e.sent,e.t1=r,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Y(t),n=Object(b.a)(a,2),s=n[0],r=n[1],i=s.then((function(e){return Z(e)})),e.next=4,i;case 4:return e.t0=e.sent,e.t1=r,e.abrupt("return",[e.t0,e.t1]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(R.a)(F.a.mark((function e(t,a,n,s){var r,i,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=null,i=a instanceof Array?$(a,50):[[a]],c=i.map(function(){var e=Object(R.a)(F.a.mark((function e(a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s[t]=a.join("|"),e.abrupt("return",J(n,s,5).then((function(e){return r.push(e)})).catch((function(e){return null})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(c);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,s){return e.apply(this,arguments)}}(),Y=function(e){var t=new Date,a=t.toISOString();return t-=1e3,t=new Date(t).toISOString(),[J(E,{action:"query",format:"json",list:"recentchanges",rcprop:"title|ids|timestamp|user|sizes",rclimit:"max",rcstart:t,rcend:e},5).then((function(e){return e.query.recentchanges})).then((function(e){var t=e.map((function(e){return e.revid}));return X(t).then((function(t){return e.map((function(e){return e.scores=t[e.revid],e}))}))})),a]},_=function(e){return H("ususers",e,E,{action:"query",format:"json",list:"users",usprop:"groups"}).then((function(e){var t={};return e.forEach((function(e){e.query.users.forEach((function(e){e.groups&&(t[e.name]=e.groups)}))})),t}))},J=function(){var e=Object(R.a)(F.a.mark((function e(t,a,n){var s,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=new URLSearchParams(a).toString(),r=t+"?"+s+"&origin=*",e.next=5,fetch(r).then((function(e){return e.json()}));case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(0),1!==n){e.next=12;break}throw e.t0;case 12:return e.next=14,setTimeout(J(t,a,n-1),500);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return"revids",a={},n={},e.abrupt("return",H("revids",t,"https://ores.wikimedia.org/v3/scores/wikidatawiki/",a).then((function(e){return e.forEach((function(e){var t;return n=Object(M.a)(Object(M.a)({},n),null===(t=e.wikidatawiki)||void 0===t?void 0:t.scores)})),n})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){var t={};e.forEach((function(e){var a=t[e.title]||0;t[e.title]=a+1}));var a=Object.entries(t).map((function(e){var t=Object(b.a)(e,2);return{id:t[0],actions:t[1]}}));return a.sort((function(e,t){return t.actions-e.actions})),a},Z=function(e){var t=function(e,t){return t.actions-e.actions},a={};e.forEach((function(e){var t=e.user,n=a[t]||0;a[t]=n+1}));var n=Object.entries(a).map((function(e){var t=Object(b.a)(e,2);return{username:t[0],actions:t[1]}})),s=n.map((function(e){return e.username}));return _(s).then((function(e){n.forEach((function(t){return t.groups=e[t.username]})),n.sort(t)})),n},$=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},Q=function(){function e(t){Object(u.a)(this,e),this.changes=[],this.maxItems=t,this.prevTimestamp=(new Date).toISOString()}return Object(l.a)(e,[{key:"refresh",value:function(){var e=this,t=Y(this.prevTimestamp),a=Object(b.a)(t,2),n=a[0],s=a[1];n.then((function(t){var a=t.map((function(e){return e.user}));_(a).then((function(a){return t.forEach((function(t){t.groups=a[t.user],e.changes.unshift(t),e.changes.length>e.maxItems&&e.changes.pop()}))}))})),this.prevTimestamp=s}}]),e}();a(374);var ee=function(e){return Math.round(Math.abs((new Date).getTime()-new Date(e).getTime())/1e3)},te=function(){var e=Object(n.useState)(new Q(30)),t=Object(b.a)(e,1)[0],a=Object(n.useState)(!1),s=Object(b.a)(a,2),r=s[0],i=s[1],c=Object(n.useState)({items:[]}),o=Object(b.a)(c,2),u=o[0],l=o[1];return Object(n.useEffect)((function(){var e=setInterval((function(){r||t.refresh(),l({items:t.changes})}),500);return function(){return clearInterval(e)}}),[t,r]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"text-blue text-left",children:"Most Recent Activity"}),Object(d.jsx)("form",{className:"text-left",onChange:function(){i((function(e){return!e}))},children:Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox"})," Paused"]})}),Object(d.jsx)("ul",{className:"list-group",children:u.items.map((function(e,t){var a,n,s;return Object(d.jsx)("li",{className:"list-group-item text-left",children:Object(d.jsx)("div",{className:(null===(a=e.scores)||void 0===a||null===(n=a.damaging)||void 0===n||null===(s=n.score)||void 0===s?void 0:s.prediction)?"text-red":"",children:"User ".concat(e.user," action ").concat(e.type," on ").concat(e.title," ").concat(ee(e.timestamp)," seconds ago")})},t)}))})]})},ae=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={history:n.props.history},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"HomePage",children:[Object(d.jsx)(k,{history:this.state.history}),Object(d.jsx)("div",{className:"",children:Object(d.jsx)(te,{})}),"."," "]})}}]),a}(n.Component),ne=a(87),se=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onClick=function(){n.state.history.push(n.state.pageLink)},n.state={history:n.props.history,title:n.props.title,pageLink:n.props.pageLink,graph:n.props.graph},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)(ne.a,{onClick:this.onClick,tag:"a",className:"graph-card",children:Object(d.jsxs)(ne.a.Body,{children:[Object(d.jsx)(ne.a.Title,{className:"card-title",children:this.state.title}),this.state.graph]})})}}]),a}(n.Component),re=a(64),ie=a(20),ce=a(321),oe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).tooltip=function(e,t){return Object(d.jsx)("div",{className:"iframe-container",children:Object(d.jsx)("iframe",{src:t+e.indexValue,className:"iframe",title:"tooltip-option-2"})})},n.loadData=function(){n.props.settings.getData.bind(Object(ie.a)(n))().then((function(e){var t=e.slice(0,n.state.fullGraph?30:10);n.setState({loaded:!0,data:t})}))},n.refresh=Object(R.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.paused){e.next=4;break}return t=n.props.settings.refreshMethod.bind(Object(ie.a)(n)),e.next=4,t();case 4:case"end":return e.stop()}}),e)}))),n.state={loaded:!1,data:null,fullGraph:n.props.fullGraph},n.loadData(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.refreshInterval=setInterval(Object(R.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refresh();case 2:case"end":return t.stop()}}),t)}))),this.props.settings.refreshTime)}},{key:"render",value:function(){var e={},t=null,a="",n=null,s=!1,r=null,i=[],c=this.props.settings.colorBy?this.props.settings.colorBy:"index";return this.state.fullGraph?(e=this.props.settings.margin?this.props.settings.margin:{top:5,right:30,bottom:80,left:80},this.props.settings.legend&&(i=[this.props.settings.legend]),t=!0,a="full-graph-container",this.props.settings.onClick&&(n=this.props.settings.onClick,s=!0),this.props.settings.tooltip&&(r=this.props.settings.tooltip.bind(this))):(e={top:0,right:0,bottom:0,left:0},t=!1,a="Graph-Container-Card"),Object(d.jsx)("div",{children:this.state.loaded?Object(d.jsx)("div",{className:a,children:Object(d.jsx)(ce.a,{data:this.state.data,keys:this.props.settings.keys,indexBy:this.props.settings.index,margin:e,padding:.3,colors:{scheme:this.props.settings.colors},colorBy:c,borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:30,legend:this.props.settings.xAxis,legendPosition:"start",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:this.props.settings.yAxis,legendPosition:"middle",legendOffset:-60},enableLabel:t,onClick:s?n:function(){},animate:t,isInteractive:t,motionStiffness:90,motionDamping:15,tooltip:r,legends:i})}):"Loading..."})}}]),a}(n.Component),ue=a(156),le=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).tooltip=function(e,t){return Object(d.jsx)("span",{})},n.loadData=function(){n.props.settings.getData.bind(Object(ie.a)(n))().then((function(e){var t=e.slice(0,n.state.fullGraph?30:9);n.setState({loaded:!0,data:t})}))},n.refresh=Object(R.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.paused||n.loadData();case 1:case"end":return e.stop()}}),e)}))),n.state={loaded:!1,data:null,fullGraph:n.props.fullGraph},n.loadData(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.refreshInterval=setInterval(Object(R.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refresh();case 2:case"end":return t.stop()}}),t)}))),this.props.settings.refreshTime)}},{key:"render",value:function(){var e={},t=null,a="",n=function(){},s=null,r={scheme:this.props.settings.colors};return this.props.settings.colorFunction&&(r=this.props.settings.colorFunction),this.state.fullGraph?(e={top:30,right:30,bottom:30,left:30},t=!0,a="full-graph-container",this.props.settings.onClick&&(n=this.props.settings.onClick),this.props.settings.tooltip&&(s=this.props.settings.tooltip.bind(this))):(e={top:0,right:0,bottom:0,left:0},t=!1,a="Graph-Container-Card"),Object(d.jsx)("div",{children:this.state.loaded?Object(d.jsx)("div",{className:a,children:Object(d.jsx)(ue.a,{data:this.state.data,margin:e,innerRadius:.4,padAngle:0,cornerRadius:0,colors:r,enableRadialLabels:t,radialLabel:"label",radialLabelsSkipAngle:10,radialLabelsTextXOffset:6,radialLabelsTextColor:"#333333",radialLabelsLinkOffset:0,radialLabelsLinkDiagonalLength:16,radialLabelsLinkHorizontalLength:24,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},enableSlicesLabels:t,slicesLabelsSkipAngle:10,slicesLabelsTextColor:"#333333",animate:!0,motionStiffness:90,motionDamping:15,isInteractive:this.state.fullGraph,onClick:n,tooltip:s,defs:[{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.4)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{type:"edit"},id:"lines"}]})}):"Loading..."})}}]),a}(n.Component),he=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={history:n.props.history,title:n.props.name},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"HomePage",children:[Object(d.jsx)(k,{history:this.state.history}),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-lg-3 col-12 infobox",children:[Object(d.jsx)("h2",{children:this.state.title}),Object(d.jsx)("p",{}),Object(d.jsx)("p",{children:this.props.explanation}),Object(d.jsx)("p",{children:Object(d.jsx)("form",{onChange:this.props.handlePause,children:Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",id:"paused",name:"paused",value:this.props.paused})," ","Paused"]})})})]}),Object(d.jsx)("div",{className:"col-lg-9 col-12",children:this.props.graph})]})]})}}]),a}(n.Component),pe={getData:function(){var e=Object(R.a)(F.a.mark((function e(){var t,a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z((new Date).toISOString());case 2:return t=e.sent,a=Object(b.a)(t,2),n=a[0],s=a[1],n=n.slice(0,50),this.setState({fullData:n,prevTimestamp:s}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(){var t,a,n,s,r,i,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(this.state.prevTimestamp);case 2:t=e.sent,a=Object(b.a)(t,2),n=a[0],s=a[1],this.setState({prevTimestamp:s}),n=n.slice(0,50),this.state.fullData?(r=this.state.fullData,n.forEach((function(e){for(var t=-1,a=0;a<r.length;a+=1)r[a].username===e.username&&(t=a);-1!==t?r[t].actions+=e.actions:r.push(e)})),r.sort((function(e,t){return t.actions-e.actions})),r.slice(0,50),(i=r.slice(0,this.state.fullGraph?30:10)).forEach((function(e){void 0!==e.groups&&e.groups.includes("bot")?(e.bot=e.actions,e.human=0):(e.bot=0,e.human=e.actions)})),this.setState({fullData:r,data:i})):(c=n.slice(0,this.state.fullGraph?30:10),this.setState({data:c}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),keys:["bot","human"],index:"username",xAxis:"username",yAxis:"actions",colors:"set1",colorBy:"id",legend:{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]},margin:{top:5,right:130,bottom:50,left:80},onClick:function(e){window.open("https://www.wikidata.org/wiki/User:"+e.indexValue,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/User:")}},de=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handlePause=function(e){var t=n.state.paused;n.setState({paused:!t})},n.state={history:n.props.history,paused:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:"A live view of the users active right now. The graph shows users active since this page was loaded. Hover over a bar to get a preview of the user's page, or click to open the user's page in a new tab.",graph:Object(d.jsx)(oe,{fullGraph:!0,settings:pe,paused:this.state.paused}),name:"Most Active Users"})}}]),a}(n.Component),fe={getData:function(){var e=Object(R.a)(F.a.mark((function e(){var t,a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q((new Date).toISOString());case 2:return t=e.sent,a=Object(b.a)(t,2),n=a[0],s=a[1],n=n.slice(0,50),this.setState({fullData:n,prevTimestamp:s}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(){var t,a,n,s,r,i,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(this.state.prevTimestamp);case 2:t=e.sent,a=Object(b.a)(t,2),n=a[0],s=a[1],this.setState({prevTimestamp:s}),n=n.slice(0,50),this.state.fullData?(r=this.state.fullData,n.forEach((function(e){for(var t=-1,a=0;a<r.length;a+=1)r[a].id===e.id&&(t=a);-1!==t?r[t].actions+=e.actions:r.push(e)})),r.sort((function(e,t){return t.actions-e.actions})),r.slice(0,50),i=r.slice(0,this.state.fullGraph?30:10),this.setState({fullData:r,data:i})):(c=n.slice(0,this.state.fullGraph?30:10),this.setState({data:c}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),keys:["actions"],index:"id",xAxis:"pages",yAxis:"actions",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/"+e.indexValue,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/")}},be=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handlePause=function(e){var t=n.state.paused;n.setState({paused:!t})},n.state={history:n.props.history,paused:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:"A live view of the pages being edited right now. The graph shows pages edited since this page was loaded. Hover over a bar to get a preview of the page, or click to open the page in a new tab.",graph:Object(d.jsx)(oe,{fullGraph:!0,settings:fe,paused:this.state.paused}),name:"Most Active Pages"})}}]),a}(n.Component),je={getData:W,refreshTime:2e3,refreshMethod:W,colorBy:"type",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/"+e.label,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/")}},ve=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handlePause=function(e){var t=a.state.paused;a.setState({paused:!t})},a.state={history:a.props.history,paused:!1},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:Object(d.jsxs)("div",{children:["The largest of the last 500 edits. The number in each of the sections represents the size of the edit in bytes. Hover over a section to get a preview of the page, or click to open the page in a new tab.",Object(d.jsx)("p",{children:Object(d.jsx)("img",{className:"legend",src:a(107),alt:"Legend"})})]}),graph:Object(d.jsx)(le,{fullGraph:!0,settings:je,paused:this.state.paused}),name:"Largest Recent Edits"})}}]),n}(n.Component),me={getData:function(){var e=Object(R.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return(t=e.sent).forEach((function(e){e.id=e.revid.toString(),e.value=Math.abs(e.newlen-e.oldlen),e.label=e.title})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return(t=e.sent).forEach((function(e){e.value=Math.abs(e.newlen-e.oldlen),e.id=e.revid.toString(),e.label=e.title})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),colorBy:"type",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/"+e.label,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/")}},ge=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handlePause=function(e){var t=a.state.paused;a.setState({paused:!t})},a.state={history:a.props.history,paused:!1},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:Object(d.jsxs)("div",{children:["The size of the last 30 edits. The number in each of the sections represents the size of the edit in bytes. Hover over a section to get a preview of the page, or click to open the page in a new tab.",Object(d.jsx)("p",{children:Object(d.jsx)("img",{className:"legend",src:a(107),alt:"Legend"})})]}),graph:Object(d.jsx)(le,{fullGraph:!0,settings:me,paused:this.state.paused}),name:"Recent Edit Size"})}}]),n}(n.Component),xe={getData:U,refreshTime:2e3,refreshMethod:U,colorBy:"type",colors:"category10",name:"Proportion Of Edits Flagged"},Oe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handlePause=function(e){var t=n.state.paused;n.setState({paused:!t})},n.state={history:n.props.history,paused:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:"The proportion of the last 50 edits that was flagged as potentially damaging.",graph:Object(d.jsx)(le,{fullGraph:!0,settings:xe,paused:this.state.paused}),name:xe.name})}}]),a}(n.Component),ye=a(21),ke=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).tooltip=function(e,t){return Object(d.jsx)("span",{})},n.loadData=function(){n.props.settings.getData.bind(Object(ie.a)(n))(n.props.value).then((function(e){if(-1!=e){var t=e.slice(0,n.state.fullGraph?30:9);n.setState({loaded:!0,data:t})}else n.setState({dataFinished:!0})}))},n.loadDataCont=function(){n.props.settings.refreshMethod.bind(Object(ie.a)(n))(n.props.value).then((function(e){if(-1!=e){var t=e.slice(0,n.state.fullGraph?30:9);n.setState({loaded:!0,data:t})}else n.setState({dataFinished:!0,initialCall:!0})}))},n.refresh=Object(R.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({initialCall:!1}),n.loadData();case 2:case"end":return e.stop()}}),e)}))),n.refreshCont=Object(R.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.loadDataCont();case 1:case"end":return e.stop()}}),e)}))),n.state={loaded:!1,data:null,fullGraph:n.props.fullGraph,value:n.props.value,initialCall:!0,dataFinished:!1,changeValue:"",initialWait:!0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.refreshInterval=setInterval(Object(R.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.loading||e.setState({loaded:!1,initialCall:!0,dataFinished:!1}),e.state.changeValue!=e.props.value&&e.setState({changeValue:e.props.value,value:e.props.value,dataFinished:!1,initialCall:!0}),!e.state.initialCall||!e.state.value||e.state.dataFinished){t.next=8;break}return e.setState({changeValue:e.state.value}),t.next=6,e.refresh();case 6:t.next=11;break;case 8:if(e.state.initialCall||!e.state.value||e.state.dataFinished){t.next=11;break}return t.next=11,e.refreshCont();case 11:case"end":return t.stop()}}),t)}))),this.props.settings.refreshTime)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"render",value:function(){var e={},t=null,a="",n=function(){},s=null,r={scheme:this.props.settings.colors};return this.props.settings.colorFunction&&(r=this.props.settings.colorFunction),this.state.fullGraph?(e={top:30,right:30,bottom:30,left:30},t=!0,a="full-graph-container",this.props.settings.onClick&&(n=this.props.settings.onClick),this.props.settings.tooltip&&(s=this.props.settings.tooltip.bind(this))):(e={top:0,right:0,bottom:0,left:0},t=!1,a="Graph-Container-Card"),Object(d.jsx)("div",{children:this.state.loaded?Object(d.jsx)("div",{className:a,children:Object(d.jsx)(ue.a,{data:this.state.data,margin:e,innerRadius:.4,padAngle:0,cornerRadius:0,colors:r,enableRadialLabels:t,radialLabel:"label",radialLabelsSkipAngle:10,radialLabelsTextXOffset:6,radialLabelsTextColor:"#333333",radialLabelsLinkOffset:0,radialLabelsLinkDiagonalLength:16,radialLabelsLinkHorizontalLength:24,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},enableSlicesLabels:t,slicesLabelsSkipAngle:10,slicesLabelsTextColor:"#333333",animate:!0,motionStiffness:90,motionDamping:15,isInteractive:this.state.fullGraph,onClick:n,tooltip:s,defs:[{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.4)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{type:"edit"},id:"lines"}]})}):"Loading..."})}}]),a}(n.Component),we=function e(t){Object(u.a)(this,e),this.data=t,this.time=Date.now()},Ce=function(){function e(){Object(u.a)(this,e),this.data={},this.length=0}return Object(l.a)(e,[{key:"addCache",value:function(e,t){this.data[e]||this.length++,this.data[e]=new we(t),this.cleanCache()}},{key:"getCache",value:function(e){return this.data[e]?this.data[e].data:-1}},{key:"cleanCache",value:function(){for(;this.length>1024;){var e=null;for(var t in this.data)(null==e||this.data[t].time<this.data[e].time)&&(e=t);this.length--,delete this.data[e]}}}]),e}(),Se="https://www.wikidata.org/w/api.php",Ne="https://en.wikipedia.org/w/api.php",Le=a(497),De=(a(559).XMLHttpRequest,new Ce),Te=new Ce,Ge=new Ce,Pe=new Ce,Me=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==(a=De.getCache(t))){e.next=5;break}return e.abrupt("return",a);case 5:return n={action:"query",format:"json",list:"usercontribs",uclimit:20,ucuser:t},e.next=8,Ee(Ne,n,5).then((function(e){return Ve(e.query.usercontribs,e)}));case 8:return s=e.sent,De.addCache(s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n,s,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==(n=De.getCache(a))){e.next=5;break}return e.abrupt("return",n);case 5:return s={action:"query",format:"json",list:"usercontribs",uclimit:20,ucuser:t,uccontinue:a},e.next=8,Ee(Ne,s,5).then((function(e){return Ve(e.query.usercontribs,e)}));case 8:return r=e.sent,De.addCache(a,r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(R.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t);case 2:if(-1!==(a=e.sent)){e.next=5;break}return e.abrupt("return",-1);case 5:return e.next=7,We(a);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t);case 2:if(-1!==(n=e.sent)){e.next=5;break}return e.abrupt("return",-1);case 5:return e.next=7,qe(n,a);case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(R.a)(F.a.mark((function e(t,a,n){var s,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=new URLSearchParams(a).toString(),r=t+"?"+s+"&origin=*",e.next=5,Le(r).then((function(e){return e.json()}));case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(0),1!==n){e.next=12;break}throw e.t0;case 12:return e.abrupt("return",setTimeout(Ee(t,a,n-1),500));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(R.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=-1;"undefined"===typeof t[a];)a+=1;if(!t[a].hasOwnProperty("pageprops")){e.next=4;break}return e.abrupt("return",t[a].pageprops.wikibase_item);case 4:return e.abrupt("return",-1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(R.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=0;"undefined"===typeof t[a];)a+=1;if(!t[a].hasOwnProperty("revisions")){e.next=4;break}return e.abrupt("return",t[a].revisions);case 4:return e.abrupt("return",-1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(R.a)(F.a.mark((function e(t,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.hasOwnProperty("continue")){e.next=4;break}return e.abrupt("return",[t,a.continue.uccontinue]);case 4:return e.abrupt("return",[t,-1]);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==(a=Ge.getCache(t))){e.next=5;break}return e.abrupt("return",a);case 5:return n={action:"query",format:"json",prop:"pageprops",titles:t},e.next=8,Ee(Ne,n,5).then((function(e){return Ae(e.query.pages)}));case 8:return s=e.sent,Ge.addCache(t,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==(a=Te.getCache(t))){e.next=5;break}return e.abrupt("return",a);case 5:return n={action:"query",format:"json",prop:"revisions",titles:t,rvprops:"ids|timestamp|flags|comment|user",rvlimit:20},e.next=8,Ee(Se,n,5).then((function(e){return ze(e.query.pages,e)}));case 8:return s=e.sent,Te.addCache(t,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(R.a)(F.a.mark((function e(t,a){var n,s,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==(n=Te.getCache(a))){e.next=5;break}return e.abrupt("return",n);case 5:return s={action:"query",format:"json",prop:"revisions",titles:t,rvprops:"ids|timestamp|flags|comment|user",rvlimit:20,rvcontinue:a},e.next=8,Ee(Se,s,5).then((function(e){return ze(e.query.pages,e)}));case 8:return r=e.sent,Te.addCache(a,r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(R.a)(F.a.mark((function e(t,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.hasOwnProperty("continue")){e.next=4;break}return e.abrupt("return",[Be(t),a.continue.rvcontinue]);case 4:return e.abrupt("return",[Be(t),-1]);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),He=function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==(a=Pe.getCache(t))){e.next=5;break}return e.abrupt("return",a);case 5:return n={action:"query",format:"json",list:"prefixsearch",pssearch:t},e.next=8,Ee(Ne,n,5).then((function(e){return e}));case 8:return s=e.sent,Pe.addCache(t,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye={getData:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return e.next=3,Fe(t).then((function(e){e[0].then((function(e){h.setState({values:e})})),h.setState({keyValue:e[1]})}));case 3:e.sent,a=new Map,this.state.values.forEach((function(e){a.has(e.user)||a.set(e.user,e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.id=e.revid,e.label=e.user,e.value=h.state.values.reduce((function(t,a){return a.user===e.user&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return this.setState({singleArray:i}),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==this.state.keyValue){e.next=14;break}return e.next=3,Re(t,this.state.keyValue).then((function(e){e[0].then((function(e){h.setState({values:h.state.values.concat(e)})})),h.setState({keyValue:e[1]})}));case 3:e.sent,a=new Map,this.state.values.forEach((function(e){a.has(e.user)||a.set(e.user,e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.id=e.revid,e.label=e.user,e.value=h.state.values.reduce((function(t,a){return a.user===e.user&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return this.setState({singleArray:i}),e.abrupt("return",i);case 14:return e.abrupt("return",-1);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),colorBy:"type",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/User:"+e.label)},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/User:")}},_e=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handlePause=function(){var e=a.state.paused;a.setState({paused:!e})},a.state={history:a.props.history,paused:!1,value:a.props.value,key:"",recentChanges:[],loading:!0,fullGraph:a.props.fullGraph},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){0==this.state.fullGraph&&this.props.onRef(this)}},{key:"onclick",value:function(e){this.setState({value:e})}},{key:"render",value:function(){return this.props.fullGraph?Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:Object(d.jsxs)("div",{children:["The number of changes made by different users on this page. Hover over a section to get a preview of the page, or click to open the page in a new tab.",Object(d.jsx)("p",{children:Object(d.jsx)("img",{className:"legend",src:a(107),alt:"Legend"})})]}),graph:Object(d.jsx)(ke,{fullGraph:this.props.fullGraph,settings:Ye,paused:this.state.paused,recentChanges:this.state.recentChanges,value:this.state.value,loading:this.state.loading}),name:"Number of Changes"}):""===this.state.value?Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:"Search For a Graph"})}):Object(d.jsx)(ke,{fullGraph:this.props.fullGraph,settings:Ye,paused:this.state.paused,recentChanges:this.state.recentChanges,value:this.state.value,loading:this.state.loading})}}]),n}(n.Component),Je=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={history:n.props.history},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"HomePage",children:[Object(d.jsx)(k,{}),Object(d.jsxs)("div",{className:"row justify-content-left text-dark",children:[Object(d.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-4",children:[Object(d.jsx)("div",{className:"feedContainer",children:Object(d.jsx)(te,{})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"feed-button button-position",onClick:function(t){e.props.history.push("/user-search")},children:"User Search"}),Object(d.jsx)("button",{className:"feed-button button-position",onClick:function(t){e.props.history.push("/page-revisions")},children:"Page Search"})]})]}),Object(d.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-8",children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",value:"memory",onInput:function(e){A.mode=!A.mode,console.log("Memory mode toggled")}}),"Memory saving mode"]}),Object(d.jsxs)("div",{className:"deck-container",children:[Object(d.jsxs)(re.a,{className:"deck",children:[Object(d.jsx)(se,{title:"Recent Edit Size",pageLink:"recent-edit-size",history:this.state.history,graph:Object(d.jsx)(le,{paused:!0,fullGraph:!1,settings:me})}),Object(d.jsx)(se,{title:"Most Active Users",pageLink:"most-active-users",history:this.state.history,graph:Object(d.jsx)(oe,{paused:!1,fullGraph:!1,settings:pe})})]}),Object(d.jsx)(re.a,{className:"deck",children:Object(d.jsx)(se,{title:"Most Active Pages",pageLink:"most-active-pages",history:this.state.history,graph:Object(d.jsx)(oe,{paused:!1,fullGraph:!1,settings:fe})})}),Object(d.jsxs)(re.a,{className:"deck",children:[Object(d.jsx)(se,{title:"Largest Recent Edits",pageLink:"largest-recent-edits",history:this.state.history,graph:Object(d.jsx)(le,{paused:!0,fullGraph:!1,settings:je})}),Object(d.jsx)(se,{title:xe.name,pageLink:"proportion-flagged",history:this.state.history,graph:Object(d.jsx)(le,{paused:!1,fullGraph:!1,settings:xe})})]})]})]})]})]})}}]),a}(n.Component),Xe={getData:function(){var e=Object(R.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){this.loadData()},keys:["editcount"],index:"name",xAxis:"users",yAxis:"edit count",colors:"paired",tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/User:")}},Ke=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handlePause=function(e){n.setState({paused:e.target.value})},n.state={history:n.props.history,paused:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,graph:Object(d.jsx)(oe,{fullGraph:!0,settings:Xe,paused:this.state.paused}),name:"Users By Most Edits"})}}]),a}(n.Component),Ze=a(219),$e=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).decrement=function(){n.setState({currentStudent:n.state.currentStudent>=1?n.state.currentStudent-1:0})},n.increment=function(){n.setState({currentStudent:n.state.currentStudent<2?n.state.currentStudent+1:2})},n.state={history:n.props.history,studentList:[[{firstName:"Brian",lastName:"Lynch",year:"3rd Year CS",team:"Frontend Team",github:"https://github.com/brianlunch"},{firstName:"Isobel",lastName:"Mahon",year:"3rd Year CS",team:"Frontend Team",github:"https://github.com/isobelm"},{firstName:"Odhran",lastName:"Mullen",year:"3rd Year CSB",team:"Backend Team",github:"https://github.com/omullan"},{firstName:"Alex",lastName:"Mahon",year:"2nd Year CS",team:"Frontend Team",github:"https://github.com/Juuiko"},{firstName:"Flora",lastName:"Molnar",year:"2nd Year CSB",team:"Frontend Team",github:"https://github.com/flora-m"},{firstName:"Lexes",lastName:"Mantiquilla",year:"2nd Year CS",team:"Backend Team",github:"https://github.com/lexesjan"}],[{firstName:"Jeremie",lastName:"Sajeev Daniel",year:"3rd Year ICS",team:"Backend Team",github:"https://github.com/JeremieSD"},{firstName:"Conor",lastName:"O'Neill",year:"3rd Year ICS",team:"Frontend Team",github:"https://github.com/conoro24"},{firstName:"Matteo",lastName:"McGuinness",year:"2nd Year ICS",team:"Frontend Team",github:"https://github.com/m477301"},{firstName:"Emmet",lastName:"Morrin",year:"2nd Year ICS",team:"Backend Team",github:"https://github.com/Unimuspanet"},{firstName:"Aoife",lastName:"Khan",year:"2nd Year CSB",team:"Frontend Team",github:"https://github.com/aoife-K"},{firstName:"Xiaolei",lastName:"Zhang",year:"2nd Year ICS",team:"Frontend Team",github:"https://github.com/Xiaoleiii"}],[{firstName:'James "Jay"',lastName:"Cowan",year:"3rd Year CSB",team:"Project Leader",github:"https://github.com/JayCowan"},{firstName:"Liam",lastName:"O Lionaird",year:"3rd Year ICS",team:"Backend Team",github:"https://github.com/liam-ol"},{firstName:"Conor",lastName:"O Sirideain",year:"3rd Year ICS",team:"Frontend Team",github:"https://github.com/Tepja16"},{firstName:"Micheal",lastName:"Keogh",year:"2nd Year ICS",team:"Frontend Team",github:"https://github.com/M-Keogh"},{firstName:"Ridish",lastName:"Kolli",year:"2nd Year ICS",team:"Frontend Team",github:"https://github.com/ridish05"},{firstName:"Maile",lastName:"Monteiro da Rocha",year:"2nd Year CSB",team:"Backend Team",github:"https://github.com/maile-mdr"}]],currentStudent:2},n.decrement=n.decrement.bind(Object(ie.a)(n)),n.increment=n.increment.bind(Object(ie.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"aboutPageContainer",children:[Object(d.jsx)(k,{history:this.state.history}),Object(d.jsx)("div",{className:" text-left",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-lg-6 col-sm-12  aboutPageContent",children:[Object(d.jsxs)("div",{className:"explainContainer text-left",children:[Object(d.jsx)("h3",{className:"text-blue",children:"Why we made our project"}),Object(d.jsx)("p",{children:"We are a group of Computer Science students studying in Trinity College Dublin. We undertake a module in which we are given real world projects from a variety of individuals, researchers and businesses."}),Object(d.jsx)("p",{children:"Our clients were Fabrizio and Damien who work in the Trinity ADAPT research center and they tasked us to create a website that will visualise various changes to Wikidata in quasi-real-time. Its targeted users are researchers and should make it easier to identify spam and incorrect or malicious edits to Wikidata."})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:" licenseContainer text-left",children:[Object(d.jsx)("h3",{className:"text-blue",children:"Licensing"}),Object(d.jsx)("p",{children:"We have insured all libraries and all project dependencies licenses cover our web apps intended use."}),Object(d.jsxs)("p",{children:["We have decided to use an"," ",Object(d.jsx)("a",{href:"https://opensource.org/licenses/MIT",children:"MIT license"})," ","for this project."]}),Object(d.jsxs)("p",{children:["More in depth information along with the projects source code can be found on the projects"," ",Object(d.jsx)("a",{href:"https://github.com/isobelm/Software-Engineering",children:"Github."})," "]})]})]}),Object(d.jsxs)("div",{className:"col-lg-6 col-sm-12 profiles",children:[Object(d.jsxs)("div",{className:"client",children:[Object(d.jsx)("h3",{className:"text-red",children:"Clients"}),Object(d.jsxs)("div",{className:"card-deck",children:[Object(d.jsx)("div",{className:"card card-profile",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title text-center text-black",children:"Damien Graux"}),Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"GH aBlack",href:"https://dgraux.github.io/",children:Object(d.jsx)(L.a,{icon:D.c})})})]})}),Object(d.jsx)("div",{className:"card card-profile",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title text-center text-black",children:"Fabrizio Orlandi"}),Object(d.jsx)("div",{className:"text-center text-black",children:Object(d.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"GH aBlack",href:"https://www.scss.tcd.ie/personnel/orlandif",children:Object(d.jsx)(L.a,{icon:D.c})})})]})})]})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"text-title",children:[Object(d.jsx)("h3",{className:"text-red",children:"Students"}),Object(d.jsx)("button",{className:"text-button text-title-button",onClick:this.increment,children:"+"}),Object(d.jsxs)("span",{className:"text-center text-lower",style:{position:"relative",top:"10px",left:"5px"},children:["Year ",this.state.currentStudent+1]}),Object(d.jsx)("button",{className:"text-button text-title-button",onClick:this.decrement,children:"-"})]}),Object(d.jsx)("div",{className:"card-deck  text-center text-black",children:this.state.studentList.at(this.state.currentStudent).slice(0,3).map((function(e,t){return Object(d.jsx)("div",{className:"card card-profile",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("h5",{className:"card-title text-center",children:[e.firstName,Object(d.jsx)("br",{})," ",e.lastName]}),Object(d.jsxs)("p",{className:"card-text",children:[Object(d.jsx)("b",{children:e.year}),Object(d.jsx)("br",{}),e.team]}),Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"GH aBlack",href:e.github,children:Object(d.jsx)(L.a,{icon:Ze.a})})})]})},t)}))}),Object(d.jsx)("div",{className:"card-deck  text-center text-black",children:this.state.studentList.at(this.state.currentStudent).slice(3,6).map((function(e,t){return Object(d.jsx)("div",{className:"card card-profile",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("h5",{className:"card-title text-center",children:[e.firstName,Object(d.jsx)("br",{})," ",e.lastName]}),Object(d.jsxs)("p",{className:"card-text",children:[Object(d.jsx)("b",{children:e.year}),Object(d.jsx)("br",{}),e.team]}),Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"GH aBlack",href:e.github,children:Object(d.jsx)(L.a,{icon:Ze.a})})})]})},t)}))})]})]})})]})}}]),a}(n.Component),Qe=a(97),et=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)([]),c=Object(b.a)(i,2),o=c[0],u=c[1],l=Object(n.useState)(!1),h=Object(b.a)(l,2),p=h[0],f=h[1],j=function(e){var t=e.query.prefixsearch;u([]),t.map((function(e){var t=e.title,a={id:e.pageid,title:t};u((function(e){return[].concat(Object(Qe.a)(e),[a])}))}))},v=function(e){e.preventDefault()};return Object(n.useEffect)((function(){var t;s&&!p?(t=s,0==e.settings.type&&e.settings.getData.bind(void 0)(t).then((function(e){j(e)}))):(u([]),f(!1))}),[s]),Object(d.jsx)("form",{autoComplete:"off",onSubmit:v,style:{height:"100%"},children:Object(d.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(d.jsxs)("div",{className:"autoComplete",style:{position:"relative",margin:"2rem"},children:[Object(d.jsx)("input",{type:"text",id:"input",name:"input",value:s,onChange:function(e){return r(e.target.value)},style:{backgroundColor:"#f1f1f1",marginRight:"2rem",width:"15rem",borderStyle:"solid",borderColor:"#d4d4d4"}}),Object(d.jsx)("input",{type:"submit",onClick:function(){e.searchValue(s)},style:{}}),s&&o.map((function(e){var t=e.id,a=e.title;return Object(d.jsx)("div",{className:"searchListSuggestion",onClick:function(e){f(!0),r(a),v(e)},children:a},t)}))]})})})},tt=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={history:n.props.history,recentChanges:[],paused:!1,value:"",cont:-1,max:!0},n.togglePause=n.togglePause.bind(Object(ie.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.onRef(this),this.refreshInterval=setInterval(function(){var e=this;if(!this.state.paused&&this.state.value&&-1!=this.state.cont)Me(this.state.value).then((function(t){t[0]&&e.setState({recentChanges:e.state.recentChanges.concat(t[0]),cont:t[1]})}))}.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"onclick",value:function(e){var t=this;if(e){this.setState({value:e});Me(e).then((function(e){e[0]&&t.setState({recentChanges:e[0],cont:e[1]})}))}}},{key:"togglePause",value:function(){this.state.paused=!this.state.paused}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"text-blue text-left",children:"User Search"}),Object(d.jsx)("form",{className:"text-left",onChange:this.togglePause,children:Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox"})," Paused"]})}),Object(d.jsx)("ul",{className:"search-list-page-group",children:this.state.recentChanges.map((function(e,t){return Object(d.jsx)("li",{className:"list-group-item text-left",children:Object(d.jsxs)("div",{children:["Title: ".concat(e.title),Object(d.jsx)("br",{}),"Comment: ".concat(e.comment),Object(d.jsx)("br",{}),"Time: ".concat(e.timestamp)]})},t)}))})]})}}]),a}(n.Component),at=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onClick=function(){n.state.history.push(n.state.pageLink+":"+n.props.value)},n.state={history:n.props.history,title:n.props.title,pageLink:n.props.pageLink,graph:n.props.graph,value:n.props.value},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)(ne.a,{onClick:this.onClick,tag:"a",className:"graph-card",children:Object(d.jsxs)(ne.a.Body,{children:[Object(d.jsx)(ne.a.Title,{className:"card-title",children:this.state.title}),this.state.graph]})})}}]),a}(n.Component),nt={getData:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.next=3,Me(t).then((function(e){e[0]&&(h.setState({values:e[0]}),h.setState({keyValue:e[1]}))}));case 3:if(e.sent,-1==this.state.keyValue){e.next=15;break}a=new Map,this.state.values.forEach((function(e){a.has(e.title)||a.set(e.title,e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.id=e.revid,e.label=e.title,e.value=h.state.values.reduce((function(t,a){return a.title===e.title&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return this.setState({singleArray:i}),e.abrupt("return",i);case 15:return e.abrupt("return",-1);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==this.state.keyValue){e.next=14;break}return e.next=3,Ie(t,this.state.keyValue).then((function(e){e[0]&&(h.setState({values:h.state.values.concat(e[0])}),h.setState({keyValue:e[1]}))}));case 3:e.sent,a=new Map,this.state.values.forEach((function(e){a.has(e.title)||a.set(e.title,e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.id=e.revid,e.label=e.title,e.value=h.state.values.reduce((function(t,a){return a.title===e.title&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return this.setState({singleArray:i}),e.abrupt("return",i);case 14:return e.abrupt("return",-1);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),colorBy:"type",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/"+e.label,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/")}},st=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={history:a.props.history,paused:!1,value:a.props.value,key:"",recentChanges:[],loading:!1,fullGraph:a.props.fullGraph},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){0==this.state.fullGraph?this.props.onRef(this):this.state.value&&this.setState({loading:!0})}},{key:"onclick",value:function(e){this.setState({value:e}),e?this.setState({loading:!0}):this.setState({loading:!1})}},{key:"render",value:function(){return this.state.fullGraph?Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:Object(d.jsxs)("div",{children:["The number of changes made by this user on different pages. Hover over a section to get a preview of the page, or click to open the page in a new tab.",Object(d.jsx)("p",{children:Object(d.jsx)("img",{className:"legend",src:a(107),alt:"Legend"})})]}),graph:Object(d.jsx)(ke,{fullGraph:this.state.fullGraph,settings:nt,paused:this.state.paused,recentChanges:this.state.recentChanges,value:this.state.value,loading:this.state.loading}),name:"Number of Changes by "+this.state.value}):""===this.state.value?Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:"Search For a Graph"})}):Object(d.jsx)(ke,{fullGraph:this.state.fullGraph,settings:nt,paused:this.state.paused,recentChanges:this.state.recentChanges,value:this.state.value,loading:this.state.loading})}}]),n}(n.Component),rt=a(334),it=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).startDate=n.findStartDate(),n.todaysDate=n.findTodaysDate(),n.refresh=Object(R.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({initialCall:!1}),n.loadData();case 2:case"end":return e.stop()}}),e)}))),n.refreshCont=Object(R.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.loadDataCont();case 1:case"end":return e.stop()}}),e)}))),n.tooltip=function(e,t){return Object(d.jsx)("div",{className:"iframe-container",children:Object(d.jsx)("iframe",{src:t+e.indexValue,className:"iframe",title:"tooltip-option-2"})})},n.loadData=function(){n.props.settings.getData.bind(Object(ie.a)(n))(n.props.value).then((function(e){var t=e;n.setState({loaded:!0,data:t})}))},n.loadDataCont=function(){n.props.settings.refreshMethod.bind(Object(ie.a)(n))(n.props.value).then((function(e){if(-1!=e){var t=e;n.setState({loaded:!0,data:t})}else n.setState({dataFinished:!0,initialCall:!0})}))},n.render=function(){var e="";return n.state.fullGraph?({top:5,right:60,bottom:80,left:80},e="full-graph-container",n.props.settings.onClick):({top:0,right:0,bottom:0,left:0},e="Graph-Container-Card"),Object(d.jsx)("div",{className:e,children:!1===n.state.loaded?"Loading...":Object(d.jsx)(rt.a,{data:n.state.data,from:n.startDate,to:n.todaysDate,emptyColor:"#eeeeee",colors:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],margin:{top:40,right:40,bottom:40,left:40},yearSpacing:40,monthBorderColor:"#ffffff",dayBorderWidth:2,dayBorderColor:"#ffffff",legends:[{anchor:"bottom-right",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"right-to-left"}]})})},n.state={loaded:!1,data:null,fullGraph:n.props.fullGraph,value:n.props.value,initialCall:!0,dataFinished:!1,changeValue:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.refreshInterval=setInterval(Object(R.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.loading||e.setState({loaded:!1,initialCall:!0,dataFinished:!1}),e.state.changeValue!=e.props.value&&e.setState({changeValue:e.props.value,value:e.props.value,dataFinished:!1,initialCall:!0}),!e.state.initialCall||!e.state.value||e.state.dataFinished||!e.props.loading){t.next=8;break}return e.setState({changeValue:e.state.value}),t.next=6,e.refresh();case 6:t.next=11;break;case 8:if(e.state.initialCall||!e.state.value||e.state.dataFinished||!e.props.loading){t.next=11;break}return t.next=11,e.refreshCont();case 11:case"end":return t.stop()}}),t)}))),this.props.settings.refreshTime)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"findTodaysDate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"findStartDate",value:function(){return(new Date).getFullYear()-1+"-01-01"}}]),a}(n.Component),ct={getData:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(t).then((function(e){e[0]&&(h.setState({values:e[0]}),h.setState({nextVals:e[0]}),h.setState({keyValue:e[1]}))}));case 2:e.sent,a=new Map,this.state.values.forEach((function(e){!a.has(e.timestamp.slice(0,-10))&&e.timestamp.slice(0,-10)>"2020-01-01"&&e.timestamp.slice(0,-10)<"2021-07-01"&&a.set(e.timestamp.slice(0,-10),e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.day=e.timestamp.slice(0,-10),e.value=h.state.values.reduce((function(t,a){return a.timestamp.slice(0,-10)===e.day&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==this.state.keyValue){e.next=13;break}return e.next=3,Ie(t,this.state.keyValue).then((function(e){e[0]&&h.setState({values:h.state.values.concat(e[0])}),h.setState({keyValue:e[1]})}));case 3:e.sent,a=new Map,this.state.values.forEach((function(e){!a.has(e.timestamp.slice(0,-10))&&e.timestamp.slice(0,-10)>"2020-01-01"&&e.timestamp.slice(0,-10)<"2021-07-01"&&a.set(e.timestamp.slice(0,-10),e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.day=e.timestamp.slice(0,-10),e.value=h.state.values.reduce((function(t,a){return a.timestamp.slice(0,-10)===e.day&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return e.abrupt("return",i);case 13:return e.abrupt("return",-1);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),colorBy:"type",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/"+e.label,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/")}},ot=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handlePause=function(e){var t=a.state.paused;a.setState({paused:!t})},a.state={history:a.props.history,paused:!1,value:a.props.value,loading:!1,fullGraph:a.props.fullGraph},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){0==this.state.fullGraph?this.props.onRef(this):this.state.value&&this.setState({loading:!0})}},{key:"onclick",value:function(e){this.setState({value:e}),e?this.setState({loading:!0}):this.setState({loading:!1})}},{key:"render",value:function(){return this.state.fullGraph?Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:Object(d.jsxs)("div",{children:["Revisions over time by this user. Hover over a section to see the number of revisions made that day.",Object(d.jsx)("p",{children:Object(d.jsx)("img",{className:"legend",src:a(107),alt:"Legend"})})]}),graph:Object(d.jsx)(it,{fullGraph:this.state.fullGraph,settings:ct,paused:this.state.paused,value:this.state.value,loading:this.state.loading}),name:"User Contributions Over Time"}):""===this.state.value?Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:"Search For a Graph"})}):Object(d.jsx)(it,{fullGraph:this.state.fullGraph,settings:ct,paused:this.state.paused,value:this.state.value,loading:this.state.loading})}}]),n}(n.Component),ut=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).checkUser=function(){var e=Object(R.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,Me(t).then((function(e){if(e[0]&&-1!=e[1])return!0}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={history:n.props.history,value:"",ifConfirm:!0,firmsList:[],recentChanges:[],invalidSearch:!1,loading:!1},n.onClick=n.onClick.bind(Object(ie.a)(n)),n}return Object(l.a)(a,[{key:"onClick",value:function(e){var t=this;this.setState({invalidSearch:!1}),this.checkUser(e).then((function(a){a?(t.feed.onclick(e),t.overTime.onclick(e),t.changes.onclick(e),t.setState({value:e})):(t.setState({invalidSearch:!0}),t.feed.onclick(""),t.overTime.onclick(""),t.changes.onclick(""))}))}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)(k,{history:this.state.history}),Object(d.jsxs)("div",{className:"row justify-content-left text-dark",children:[Object(d.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-4",children:Object(d.jsx)("div",{className:"feedContainer",children:Object(d.jsx)(tt,{value:this.state.value,onRef:function(t){e.feed=t}})})}),Object(d.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-8",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(et,{settings:lt,searchValue:this.onClick.bind(this)}),this.state.invalidSearch&&Object(d.jsx)("p",{children:"This User does not exist."}),Object(d.jsx)(re.a,{className:"CardDeckRev",children:Object(d.jsx)(at,{title:"Number of Changes by User",pageLink:"user-number-of-changes",history:this.state.history,graph:Object(d.jsx)(st,{fullGraph:!1,history:this.state.history,onRef:function(t){e.changes=t},value:""}),value:this.state.value})}),Object(d.jsx)(re.a,{className:"CardDeckRev",children:Object(d.jsx)(at,{title:"User Contributions Over Time",pageLink:"user-contributions-over-time",history:this.state.history,graph:Object(d.jsx)(ot,{fullGraph:!1,history:this.state.history,onRef:function(t){e.overTime=t},value:""}),value:this.state.value})})]})})]})]})}}]),a}(n.Component),lt={type:1},ht=ut,pt=a(153),dt=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={history:n.props.history,recentChanges:[],paused:!1,value:""},n.togglePause=n.togglePause.bind(Object(ie.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.onRef(this),this.refreshInterval=setInterval(function(){var e=this;if(!this.state.paused&&this.state.value)Fe(this.state.value).then((function(t){t[0]&&t[0].then((function(t){e.setState({recentChanges:t})}))}))}.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"onclick",value:function(e){var t=this;this.setState({value:e});Fe(e).then((function(e){e[0]&&e[0].then((function(e){t.setState({recentChanges:e})}))}))}},{key:"togglePause",value:function(){this.state.paused=!this.state.paused}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"text-blue text-left",children:"Page Revisions"}),Object(d.jsx)("form",{className:"text-left",onChange:this.togglePause,children:Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox"})," Paused"]})}),Object(d.jsx)("ul",{className:"search-list-page-group",children:this.state.recentChanges.map((function(e,t){return Object(d.jsx)("li",{className:"list-group-item text-left",children:Object(d.jsxs)("div",{children:["User: ".concat(e.user),Object(d.jsx)("br",{}),"Comment: ".concat(e.comment),Object(d.jsx)("br",{}),"Time: ".concat(e.timestamp)]})},t)}))})]})}}]),a}(n.Component),ft={getData:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t).then((function(e){e[0].then((function(e){h.setState({values:e}),h.setState({nextVals:e})})),h.setState({keyValue:e[1]})}));case 2:e.sent,a=new Map,0,this.state.values.forEach((function(e){!a.has(e.timestamp.slice(0,-10))&&e.timestamp.slice(0,-10)>"2021-01-01"&&e.timestamp.slice(0,-10)<"2022-12-31"&&a.set(e.timestamp.slice(0,-10),e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.day=e.timestamp.slice(0,-10),e.value=h.state.values.reduce((function(t,a){return a.timestamp.slice(0,-10)===e.day&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),refreshTime:2e3,refreshMethod:function(){var e=Object(R.a)(F.a.mark((function e(t){var a,n,s,r,i,c,o,u,l,h=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==this.state.keyValue){e.next=13;break}return e.next=3,Re(t,this.state.keyValue).then((function(e){e[0].then((function(e){h.setState({values:h.state.values.concat(e)})})),h.setState({keyValue:e[1]})}));case 3:e.sent,a=new Map,this.state.values.forEach((function(e){!a.has(e.timestamp.slice(0,-10))&&e.timestamp.slice(0,-10)>"2021-01-01"&&e.timestamp.slice(0,-10)<"2022-12-31"&&a.set(e.timestamp.slice(0,-10),e)})),n=Object(ye.a)(a.values());try{for(r=function(){var e=s.value;e.day=e.timestamp.slice(0,-10),e.value=h.state.values.reduce((function(t,a){return a.timestamp.slice(0,-10)===e.day&&t++,t}),0)},n.s();!(s=n.n()).done;)r()}catch(p){n.e(p)}finally{n.f()}i=[a.size],c=0,o=Object(ye.a)(a.values());try{for(o.s();!(u=o.n()).done;)l=u.value,i[c++]=l}catch(p){o.e(p)}finally{o.f()}return e.abrupt("return",i);case 13:return e.abrupt("return",-1);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),colorBy:"type",colors:"set1",onClick:function(e){window.open("https://www.wikidata.org/wiki/"+e.label,"_blank")},tooltip:function(e){return this.tooltip(e,"https://www.wikidata.org/wiki/")}},bt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handlePause=function(e){var t=a.state.paused;a.setState({paused:!t})},a.state={history:a.props.history,fullGraph:a.props.fullGraph,paused:!1,value:a.props.value,loading:!0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){0==this.state.fullGraph&&this.props.onRef(this)}},{key:"onclick",value:function(e){this.setState({value:e})}},{key:"render",value:function(){return this.state.fullGraph?Object(d.jsx)(he,{handlePause:this.handlePause,paused:this.state.paused,explanation:Object(d.jsxs)("div",{children:["Revisions over time for this page. Hover over a section to see the number of revisions made that day.",Object(d.jsx)("p",{children:Object(d.jsx)("img",{className:"legend",src:a(107),alt:"Legend"})})]}),graph:Object(d.jsx)(it,{fullGraph:!0,settings:ft,paused:this.state.paused,value:this.state.value,loading:this.state.loading}),name:"Page Revisions Over Time"}):""===this.state.value?Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:"Search For a Graph"})}):Object(d.jsx)(it,{fullGraph:this.state.fullGraph,settings:ft,paused:this.state.paused,value:this.state.value,loading:this.state.loading})}}]),n}(n.Component),jt=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state=Object(pt.a)({history:n.props.history,value:"",ifConfirm:!0,firmsList:[],recentChanges:[]},"value",""),n.onClick=n.onClick.bind(Object(ie.a)(n)),n}return Object(l.a)(a,[{key:"onClick",value:function(e){this.feed.onclick(e),this.changes.onclick(e),this.overTime.onclick(e),this.setState({value:e})}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)(k,{history:this.state.history}),Object(d.jsxs)("div",{className:"row justify-content-left text-dark",children:[Object(d.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-4",children:Object(d.jsx)("div",{className:"feedContainer",children:Object(d.jsx)(dt,{value:this.state.value,onRef:function(t){e.feed=t}})})}),Object(d.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-8",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(et,{settings:vt,searchValue:this.onClick.bind(this)}),Object(d.jsx)(re.a,{className:"CardDeckRev",children:Object(d.jsx)(at,{title:"Number of Changes",pageLink:"number-of-changes",history:this.state.history,graph:Object(d.jsx)(_e,{fullGraph:!1,history:this.state.history,onRef:function(t){e.changes=t},value:""}),value:this.state.value})}),Object(d.jsx)(re.a,{className:"CardDeckRev",children:Object(d.jsx)(at,{title:"Page Revisions Over Time",pageLink:"page-revisions-over-time",history:this.state.history,graph:Object(d.jsx)(bt,{fullGraph:!1,history:this.state.history,onRef:function(t){e.overTime=t},value:""}),value:this.state.value})})]})})]})]})}}]),a}(n.Component),vt={getData:function(){var e=Object(R.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:0},mt=jt,gt={getData:function(){var e=Object(R.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},xt=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handlePause=function(e){n.setState({paused:e.target.value})},n.state={history:n.props.history,paused:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(d.jsx)(et,{settings:gt})})}}]),a}(n.Component);a(560);var Ot=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(v,{children:Object(d.jsx)(c.a,{basename:"/Software-Engineering",history:P,children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",component:T}),Object(d.jsx)(o.a,{exact:!0,path:"/page",component:Je}),Object(d.jsx)(o.a,{exact:!0,path:"/testComponent",component:xt}),Object(d.jsx)(o.a,{exact:!0,path:"/users-by-most-edits",component:Ke}),Object(d.jsx)(o.a,{exact:!0,path:"/most-active-users",component:de}),Object(d.jsx)(o.a,{exact:!0,path:"/recent-edit-size",component:ge}),Object(d.jsx)(o.a,{exact:!0,path:"/largest-recent-edits",component:ve}),Object(d.jsx)(o.a,{exact:!0,path:"/most-active-pages",component:be}),Object(d.jsx)(o.a,{exact:!0,path:"/proportion-flagged",component:Oe}),Object(d.jsx)(o.a,{exact:!0,path:"/about-page",component:$e}),Object(d.jsx)(o.a,{exact:!0,path:"/feed",component:ae}),Object(d.jsx)(o.a,{exact:!0,path:"/user-search",component:ht}),Object(d.jsx)(o.a,{exact:!0,path:"/page-revisions",component:mt}),Object(d.jsx)(o.a,{path:"/number-of-changes:id",render:function(e){var t=e.match.url;return t=t.split(":")[1],Object(d.jsx)(_e,{fullGraph:!0,value:t})}}),Object(d.jsx)(o.a,{path:"/user-number-of-changes:id",render:function(e){var t=e.match.url;return t=t.split(":")[1],Object(d.jsx)(st,{fullGraph:!0,value:t})}}),Object(d.jsx)(o.a,{path:"/page-revisions-over-time:id",render:function(e){var t=e.match.url;return t=t.split(":")[1],Object(d.jsx)(bt,{fullGraph:!0,value:t})}}),Object(d.jsx)(o.a,{path:"/user-contributions-over-time:id",render:function(e){var t=e.match.url;return t=t.split(":")[1],Object(d.jsx)(ot,{fullGraph:!0,value:t})}})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(d.jsx)(Ot,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[561,1,2]]]);
//# sourceMappingURL=main.370080b0.chunk.js.map